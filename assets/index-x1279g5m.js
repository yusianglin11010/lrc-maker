const __vite__fileDeps=["./editor-BmDhyxv7.js","./gistapi-wsVnCHGW.js","./lrc-file-name-BlWFRsDa.js","./synchronizer-UJyFZc9P.js","./gist-C41aPWu6.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
function pe(e,n){for(var s=0;s<n.length;s++){const r=n[s];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const me=function(){const n=typeof document<"u"&&document.createElement("link").relList;return n&&n.supports&&n.supports("modulepreload")?"modulepreload":"preload"}(),fe=function(e,n){return new URL(e,n).href},K={},v=function(n,s,r){let a=Promise.resolve();if(s&&s.length>0){const o=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=Promise.all(s.map(l=>{if(l=fe(l,r),l in K)return;K[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!r)for(let b=o.length-1;b>=0;b--){const f=o[b];if(f.href===l&&(!u||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":me,u||(m.as="script",m.crossOrigin=""),m.href=l,h&&m.setAttribute("nonce",h),document.head.appendChild(m),u)return new Promise((b,f)=>{m.addEventListener("load",b),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}return a.then(()=>n()).catch(o=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o})},i=React,ge=pe({__proto__:null},[i]),J=ReactDOM;function xe(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var s=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),s}var X={exports:{}},A={};const ye=xe(ge);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ve=ye,we=Symbol.for("react.element"),be=Symbol.for("react.fragment"),je=Object.prototype.hasOwnProperty,ke=ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Se={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,n,s){var r,a={},o=null,c=null;s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),n.ref!==void 0&&(c=n.ref);for(r in n)je.call(n,r)&&!Se.hasOwnProperty(r)&&(a[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps,n)a[r]===void 0&&(a[r]=n[r]);return{$$typeof:we,type:e,key:o,ref:c,props:a,_owner:ke.current}}A.Fragment=be;A.jsx=Q;A.jsxs=Q;X.exports=A;var t=X.exports;const T={lyric:"lrc-maker-lyric",preferences:"lrc-maker-preferences",token:"lrc-maker-oauth-token",gistId:"lrc-maker-gist-id",gistEtag:"lrc-maker-gist-etag",gistFile:"lrc-maker-gist-file"},Y={emptyString:"",space:" "},Le={languageName:"English",app:{name:"LRC Maker",fullname:"Akari's LRC Maker"},header:{home:"home",editor:"editor",synchronizer:"synchronizer",gist:"Github Gist",preferences:"preferences"},audio:{loadAudio:"load audio",play:"play",pause:"pause",replay5s:"replay 5s",forward5s:"forward 5s",resetRate:"reset playback rate",error:["audio error","audio aborted by user","audio network error","audio decoding error","audio not supported"]},loadAudio:{file:"File",url:"URL",loadFile:"Click here or drop audio file in this page"},home:{tips:"Tips",tipForLyricText:"Navigate to the editor page and paste lyric text.",tipForUploadAudio:"Click the bottom left button to load audio file.",tipForSynchronizer:"Navigate to synchronizer page and make your lrc :)",tipTopLeft:"Click here come back to this page",tipTopRight:"Click here to navigate to other page",tipBottomLeft:"load audio here, and control the audio",tipBottomRight:"change the playback rate here"},editor:{metaInfo:"meta info",album:"album",title:"title",artist:"artist",uploadText:"upload text",copyText:"select all and copy",downloadText:"download",saveToGist:"save to Github Gist",saveFileName:"Filename",utils:"lrc utils"},gist:{newTokenTip:"LRC Maker use Github Token to fetch and store data to Github Gist",newTokenButton:"Generate a new Github Token",newGistTip:"Create a new Gist repository or assign an existing Gist id",newGistRepoButton:"Create a new Gist Repository",gistIdPlaceholder:"Or assign an existing Gist id",info:"info",clearTokenAndGist:"Clear token and Gist id"},preferences:{version:"Version",commitHash:"Commit hash",updateTime:"Update time",repo:"Repository",help:"Help & tips",language:"Language",builtInAudio:"Use browser built-in audio player",spaceButton:"On-screen space key",themeColor:"Theme color",lrcFormat:"Change output format",fixed:"Timestamp fixed",leftSpace:"Left space",rightSpace:"Right space",clearCache:"Clear caches",themeMode:{label:"Theme Mode",auto:"auto",light:"light",dark:"dark"}},notify:{audioLoaded:"Audio loaded."}},Ee=Object.assign({"./en-US.json":()=>v(()=>import("./en-US-WL7PQHiJ.js"),[],import.meta.url).then(e=>e.default),"./ja.json":()=>v(()=>import("./ja-Cs50Jc1t.js"),[],import.meta.url).then(e=>e.default),"./ko-KR.json":()=>v(()=>import("./ko-KR-BFUsNg1j.js"),[],import.meta.url).then(e=>e.default),"./pt-BR.json":()=>v(()=>import("./pt-BR-DZBMXgrw.js"),[],import.meta.url).then(e=>e.default),"./sk-SK.json":()=>v(()=>import("./sk-SK-ClJgsC4a.js"),[],import.meta.url).then(e=>e.default),"./zh-CN.json":()=>v(()=>import("./zh-CN-jeFV2yuP.js"),[],import.meta.url).then(e=>e.default),"./zh-HK.json":()=>v(()=>import("./zh-HK-Bb6TKAl9.js"),[],import.meta.url).then(e=>e.default),"./zh-TW.json":()=>v(()=>import("./zh-TW-BDUuhu5E.js"),[],import.meta.url).then(e=>e.default)}),Re=()=>{const[e,n]=i.useState(Le),s=async r=>{const a=await Ee[`./${r}.json`]();n(a)};return[e,i.useCallback(async r=>s(r),[])]};var ze=["en-US","ja","ko-KR","pt-BR","sk-SK","zh-CN","zh-HK","zh-TW"];const _e={orange:"#ff691f",yellow:"#fab81e",lime:"#7fdbb6",green:"#19cf86",blue:"#91d2fa",navy:"#1b95e0",grey:"#abb8c2",red:"#e81c4f",pink:"#f58ea8",purple:"#c877fe"};var V=(e=>(e[e.auto=0]="auto",e[e.light=1]="light",e[e.dark=2]="dark",e))(V||{});const $={lang:"en-US",spaceStart:1,spaceEnd:0,fixed:3,builtInAudio:!1,screenButton:!1,themeColor:_e.pink,themeMode:0},Ce=(e,n)=>{const s=n.payload;return{...e,[n.type]:typeof s=="function"?s(e):s}},Ie=ze,Me=e=>{const n=$,s=navigator.languages||[navigator.language||"en-US"];n.lang=s.map(r=>r==="zh"?"zh-CN":r.startsWith("en")?"en-US":r).find(r=>Ie.includes(r))||"en-US";try{const r=JSON.parse(e()),a=Object.keys($);for(const o of a)o in r&&(n[o]=r[o])}catch{}return n},Ne=e=>i.useReducer(Ce,e,Me),B=()=>{const e=new Map;return{pub:r=>{e.forEach(a=>{a(r)})},sub:(r,a)=>(e.set(r,a),()=>{e.delete(r)})}},Te=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z"})]}),Z=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})]}),ee=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),t.jsx("path",{d:"M4 21h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zM3 9.21v5.59c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.8a.5.5 0 0 0-.85.36zM8.6 17H20c.55 0 1-.45 1-1s-.45-1-1-1H8.6c-.55 0-1 .45-1 1s.45 1 1 1zM3 4c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1zm5.6 5H20c.55 0 1-.45 1-1s-.45-1-1-1H8.6c-.55 0-1 .45-1 1s.45 1 1 1zm0 4H20c.55 0 1-.45 1-1s-.45-1-1-1H8.6c-.55 0-1 .45-1 1s.45 1 1 1z"})]}),Ve=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z"})]}),Oe=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M19.44 12.99l-.01.02c.04-.33.08-.67.08-1.01 0-.34-.03-.66-.07-.99l.01.02 2.44-1.92-2.43-4.22-2.87 1.16.01.01c-.52-.4-1.09-.74-1.71-1h.01L14.44 2H9.57l-.44 3.07h.01c-.62.26-1.19.6-1.71 1l.01-.01-2.88-1.17-2.44 4.22 2.44 1.92.01-.02c-.04.33-.07.65-.07.99 0 .34.03.68.08 1.01l-.01-.02-2.1 1.65-.33.26 2.43 4.2 2.88-1.15-.02-.04c.53.41 1.1.75 1.73 1.01h-.03L9.58 22h4.85s.03-.18.06-.42l.38-2.65h-.01c.62-.26 1.2-.6 1.73-1.01l-.02.04 2.88 1.15 2.43-4.2s-.14-.12-.33-.26l-2.11-1.66zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"})]}),He=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"})}),Pe=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"})}),Ae=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 5V2.21c0-.45-.54-.67-.85-.35l-3.8 3.79c-.2.2-.2.51 0 .71l3.79 3.79c.32.31.86.09.86-.36V7c3.73 0 6.68 3.42 5.86 7.29-.47 2.26-2.14 3.99-4.39 4.53-3.64.88-6.93-1.6-7.42-4.96-.06-.49-.48-.86-.97-.86-.6 0-1.08.53-1 1.13.63 4.47 4.94 7.75 9.77 6.67 3.09-.69 5.39-3.08 5.99-6.19C20.84 9.48 16.94 5 12 5zm-1.31 8.9l.25-2.17h2.39v.71h-1.7l-.11.92c.03-.02.07-.03.11-.05s.09-.04.15-.05.12-.03.18-.04.13-.02.2-.02c.21 0 .39.03.55.1s.3.16.41.28.2.27.25.45.09.38.09.6c0 .19-.03.37-.09.54s-.15.32-.27.45-.27.24-.45.31-.39.12-.64.12c-.18 0-.36-.03-.53-.08s-.32-.14-.46-.24-.24-.24-.32-.39-.13-.33-.13-.53h.84c.02.18.08.32.19.41s.25.15.42.15c.11 0 .2-.02.27-.06s.14-.1.18-.17.08-.15.11-.25.03-.2.03-.31-.01-.21-.04-.31-.07-.17-.13-.24-.13-.12-.21-.15-.19-.05-.3-.05c-.08 0-.15.01-.2.02s-.11.03-.15.05-.08.05-.12.07-.07.06-.1.09l-.67-.16z"})}),De=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M18.87 13c-.5 0-.91.37-.98.86-.48 3.37-3.77 5.84-7.42 4.96-2.25-.54-3.91-2.27-4.39-4.53C5.27 10.42 8.22 7 11.95 7v2.79c0 .45.54.67.85.35l3.79-3.79c.2-.2.2-.51 0-.71L12.8 1.85c-.31-.31-.85-.09-.85.35V5c-4.94 0-8.84 4.48-7.84 9.6.6 3.11 2.9 5.5 5.99 6.19 4.83 1.08 9.15-2.2 9.77-6.67.09-.59-.4-1.12-1-1.12zm-6.44 2.15c-.05.07-.11.13-.18.17s-.17.06-.27.06c-.17 0-.31-.05-.42-.15s-.17-.24-.19-.41h-.84c.01.2.05.37.13.53s.19.28.32.39.29.19.46.24.35.08.53.08c.24 0 .46-.04.64-.12s.33-.18.45-.31.21-.28.27-.45.09-.35.09-.54c0-.22-.03-.43-.09-.6s-.14-.33-.25-.45-.25-.22-.41-.28-.34-.1-.55-.1c-.07 0-.14.01-.2.02s-.13.02-.18.04-.1.03-.15.05-.08.04-.11.05l.11-.92h1.7v-.71H10.9l-.25 2.17.67.17c.03-.03.06-.06.1-.09s.07-.05.12-.07.1-.04.15-.05.13-.02.2-.02c.12 0 .22.02.3.05s.16.09.21.15.1.14.13.24.04.19.04.31-.01.22-.03.31-.06.17-.11.24z"})}),te=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.9 2 2 2h3c.55 0 1-.45 1-1s-.45-1-1-1H5V8h14v10h-3c-.55 0-1 .45-1 1s.45 1 1 1h3c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7.35 6.35l-2.79 2.79c-.32.32-.1.86.35.86H11v5c0 .55.45 1 1 1s1-.45 1-1v-5h1.79c.45 0 .67-.54.35-.85l-2.79-2.79c-.19-.2-.51-.2-.7-.01z"})]}),Fe=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{opacity:".3",d:"M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8zm4 10.59L14.59 16 12 13.41 9.41 16 8 14.59 10.59 12 8 9.41 9.41 8 12 10.59 14.59 8 16 9.41 13.41 12 16 14.59z"}),t.jsx("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})]}),ht=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M19 13v5c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-5c0-.55-.45-1-1-1s-1 .45-1 1v6c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6c0-.55-.45-1-1-1s-1 .45-1 1zm-6-.33l1.88-1.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-3.59 3.59c-.39.39-1.02.39-1.41 0L7.7 12.2c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L11 12.67V4c0-.55.45-1 1-1s1 .45 1 1v8.67z"})]}),pt=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{className:"lock-open",d:"M12 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6-5h-1V6c0-2.76-2.24-5-5-5-2.28 0-4.27 1.54-4.84 3.75-.14.54.18 1.08.72 1.22.53.14 1.08-.18 1.22-.72C9.44 3.93 10.63 3 12 3c1.65 0 3 1.35 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 11c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v8z"}),t.jsx("path",{className:"lock-close",d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"})]}),mt=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4H8c-1.1 0-1.99.9-1.99 2L6 21c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V11l-6-6zM8 21V7h6v5h5v9H8z"})]}),ft=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M9.17 6l2 2H20v10H4V6h5.17M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})]}),gt=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zM8 13h2.55v3h2.9v-3H16l-4-4z"})]}),xt=()=>t.jsx("svg",{className:"github-svg",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"})}),Ge=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"})]}),Ue=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1-8h-2V7h2v2z"})]}),Be=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0z"}),t.jsx("path",{d:"M2.73 21h18.53c.77 0 1.25-.83.87-1.5l-9.27-16c-.39-.67-1.35-.67-1.73 0l-9.27 16c-.38.67.1 1.5.87 1.5zM13 18h-2v-2h2v2zm-1-4c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1z"})]}),yt=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),t.jsx("path",{d:"M8.2 10.5c-.4-.3-1-.5-1.5-.4 0 0-3.6-3-4.3-4.3-.5-1-.6-2.8 0-3.4.6-.6 2.4-.5 3.4 0C7 3.1 10 6.7 10 6.7c0 .6 0 1.1.4 1.6l-2.3 2.2zM18.7 17.8l.3-.2 1 .9 2 3-.5.5-3-1.9-1-1.1.3-.3L14 15l1-1 3.7 3.9z"}),t.jsx("path",{d:"M13.2 7.8c-.5-1.6 0-3.3 1.1-4.5a4.5 4.5 0 0 1 4.4-1.1L16 4.7l.7 2.5 2.5.7 2.5-2.5c.4 1.5 0 3.1-1.1 4.3a4.5 4.5 0 0 1-4.6 1.1L5.6 21.4a2.1 2.1 0 0 1-3 0c-.8-.8-.8-2.2 0-3L13.2 7.8zM3.9 21c.5 0 .8-.3.8-.8a.8.8 0 1 0-1.6 0c0 .5.4.8.8.8z"})]}),R=B(),Ke={id:0},ne=()=>{const e=i.useRef(Symbol(ne.name)),[n,s]=i.useState([]);i.useEffect(()=>R.sub(e.current,o=>{s(c=>[{id:Ke.id++,...o},...c])}),[]);const r=i.useCallback(o=>{o.animationName==="slide-out-right"&&s(c=>c.slice(0,-1))},[]),a=i.useCallback(o=>{const c={info:t.jsx(Ue,{}),success:t.jsx(Ge,{}),warning:t.jsx(Be,{})}[o.type];return t.jsxs("section",{className:"toast",children:[t.jsx("section",{className:`toast-badge toast-${o.type}`,children:c}),t.jsx("section",{className:"toast-text",children:o.text})]},o.id)},[]);return t.jsx("div",{className:"toast-queue",onAnimationEnd:r,children:n.map(a)})};var _=(e=>(e[e.lang=1]="lang",e[e.builtInAudio=2]="builtInAudio",e[e.prefState=4]="prefState",e))(_||{});const I=i.createContext(void 0,(e,n)=>{let s=0;return e.lang!==n.lang&&(s|=1),e.prefState.builtInAudio!==n.prefState.builtInAudio&&(s|=2),e.prefState!==n.prefState&&(s|=4),s}),$e=({children:e})=>{const[n,s]=Ne(()=>localStorage.getItem(T.preferences)||Y.emptyString),[r,a]=Re();i.useEffect(()=>{a(n.lang).catch(c=>{R.pub({type:"warning",text:c.message})})},[n.lang,a]),i.useEffect(()=>{document.title=r.app.fullname,document.documentElement.lang=n.lang},[r,n,n.lang]);const o=i.useMemo(()=>({lang:r,prefState:n,prefDispatch:s,trimOptions:{trimStart:n.spaceStart>=0,trimEnd:n.spaceEnd>=0}}),[r,s,n]);return t.jsx(I.Provider,{value:o,children:e})},x={home:"/",editor:"/editor/",synchronizer:"/synchronizer/",gist:"/gist/",preferences:"/preferences/"},C={audioSrc:"audio-src",editorDetailsOpen:"editor-details-open",syncMode:"sync-mode",selectIndex:"select-index",ratelimit:"x-ratelimit"},se=(e,n={})=>{const{trimStart:s=!1,trimEnd:r=!1}=n,a=e.split(/\r\n|\n|\r/u),o=/\[\s*(\d{1,3}):(\d{1,2}(?:[:.]\d{1,3})?)\s*]/g,c=/\[\s*(\w{1,6})\s*:(.*?)]/,h=new Map,l=[];for(const u of a){if(u[0]!=="["){l.push({text:u});continue}o.lastIndex=0;const d=o.exec(u);if(d!==null){const m=Number.parseInt(d[1],10),b=Number.parseFloat(d[2].replace(":",".")),f=u.slice(o.lastIndex);l.push({time:m*60+b,text:f});continue}const y=c.exec(u);if(y!==null){const m=y[2].trim();if(m==="")continue;h.set(y[1],m);continue}l.push({text:u})}return s&&r?l.forEach(u=>{u.text=u.text.trim()}):s?l.forEach(u=>{u.text=u.text.trimStart()}):r&&l.forEach(u=>{u.text=u.text.trimEnd()}),{info:h,lyric:l}},G=new Map,qe=e=>{if(G.has(e))return G.get(e);const n=new Intl.NumberFormat("en",{minimumIntegerDigits:2,minimumFractionDigits:e,maximumFractionDigits:e,useGrouping:!1});return G.set(e,n),n},P=(e,n,s=!0)=>{if(e===void 0)return"";const r=qe(n),a=Math.floor(e/60).toString().padStart(2,"0"),o=r.format(e%60);return s?`[${a}:${o}]`:`${a}:${o}`},We=(e,n,s)=>{let r=e;return n>=0&&(r=" ".repeat(n)+r.trimStart()),s>=0&&(r=r.trimEnd()+" ".repeat(s)),r},Je=(e,n)=>{const{spaceStart:s,spaceEnd:r,fixed:a,endOfLine:o=`\r
`}=n,c=Array.from(e.info.entries()).map(([l,u])=>`[${l}: ${u}]`),h=e.lyric.map(l=>{if(l.time===void 0)return l.text;const u=We(l.text,s,r);return`${P(l.time,a)}${u}`});return c.concat(h).join(o)};var O=(e=>(e[e.parse=0]="parse",e[e.refresh=1]="refresh",e[e.next=2]="next",e[e.time=3]="time",e[e.info=4]="info",e[e.select=5]="select",e[e.deleteTime=6]="deleteTime",e[e.getState=7]="getState",e))(O||{});const H=(e,n,s)=>e<n?n:e>s?s:e,Xe=(e,n)=>{for(const s in n)if(e[s]!==n[s])return{...e,...n};return e},re=(e,n)=>{switch(n.type){case 0:{const{text:s,options:r}=n.payload,a=se(s,r),o=H(e.selectIndex,0,a.lyric.length-1);return{...e,...a,selectIndex:o}}case 1:{const s=n.payload;if(s>=e.currentTime&&s<e.nextTime)return e;const r=e.lyric.reduce((a,o,c)=>(o.time&&(o.time<a.nextTime&&o.time>s&&(a.nextTime=o.time,a.nextIndex=c),o.time>a.currentTime&&o.time<=s&&(a.currentTime=o.time,a.currentIndex=c)),a),{currentTime:-1/0,currentIndex:-1/0,nextTime:1/0,nextIndex:1/0});return Xe(e,r)}case 2:{const s=e.selectIndex,r=e.lyric,a=H(s+1,0,r.length-1);return{...re(e,{type:3,payload:n.payload}),selectIndex:a}}case 3:{const s=n.payload,r=e.selectIndex;let a=e.lyric;if(a[r].time!==s){const o=a.slice();o[r]={text:a[r].text,time:s},a=o}return{...e,lyric:a,currentTime:s,nextTime:-1/0}}case 4:{const{name:s,value:r}=n.payload,a=new Map(e.info);return r.trim()===""?a.delete(s):a.set(s,r.trim()),{...e,info:a}}case 5:{const s=H(n.payload(e.selectIndex),0,e.lyric.length-1);return e.selectIndex===s?e:{...e,selectIndex:s}}case 6:{const{selectIndex:s,currentIndex:r}=e;let a=e.lyric;if(a[s].time!==void 0){const o=a.slice();o[s]={text:a[s].text},a=o;let{currentTime:c,nextTime:h}=e;return s===r&&(c=1/0,h=-1/0),{...e,lyric:a,currentTime:c,nextTime:h}}return e}case 7:return n.payload(e),e}return e},Qe=e=>{const{text:n,options:s,select:r}=e();return{...se(n,s),currentTime:1/0,currentIndex:1/0,nextTime:-1/0,nextIndex:-1/0,selectIndex:r}},Ye=e=>i.useReducer(re,e,Qe),p={current:null,get src(){var e;return((e=this.current)==null?void 0:e.src)??""},get duration(){var e;return((e=this.current)==null?void 0:e.duration)??0},get paused(){var e;return((e=this.current)==null?void 0:e.paused)??!0},get playbackRate(){var e;return((e=this.current)==null?void 0:e.playbackRate)??1},set playbackRate(e){this.current!==null&&(this.current.playbackRate=e)},get currentTime(){var e;return((e=this.current)==null?void 0:e.currentTime)??0},set currentTime(e){this.current!==null&&this.current.duration!==0&&(this.current.currentTime=e)},step(e,n,s){return s===void 0&&(s=this.currentTime),e.altKey&&(n*=.2),e.shiftKey&&(n*=.5),this.currentTime=H(n+s,0,this.duration)},toggle(){var e;(e=this.current)!=null&&e.duration&&(this.current.paused?this.current.play():this.current.pause())}};var w=(e=>(e[e.pause=0]="pause",e[e.getDuration=1]="getDuration",e[e.rateChange=2]="rateChange",e))(w||{});const k=B(),U=B(),ae=e=>{if(e===null)return!1;const n=e.type;return n==="textarea"||n==="text"||n==="url"};function L(e){return"#"+e}const E={current:null,get isOpen(){return this.current!==null&&this.current.open},open(){this.current===null||this.current.open||(this.current.open=!0)},close(){this.current===null||!this.current.open||(this.current.open=!1)}},oe=({setAudioSrc:e,lang:n})=>{const s=i.useRef(Symbol(oe.name));i.useEffect(()=>k.sub(s.current,c=>{c.type===w.getDuration&&E.close()}),[]);const r=i.useCallback(()=>{const c=h=>{(h.code==="Escape"||h.key==="Escape")&&E.close()};E.isOpen?window.addEventListener("keydown",c):window.removeEventListener("keydown",c)},[]),a=i.useCallback(c=>{c.preventDefault();const l=c.target.elements.namedItem("url"),u=ie(l.value);sessionStorage.setItem(C.audioSrc,u),e(u)},[e]),o=i.useCallback(c=>{c.target.select()},[]);return J.createPortal(t.jsxs("details",{ref:E,className:"dialog fixed loadaudio-dialog",onToggle:r,children:[t.jsx("summary",{className:"dialog-close",children:t.jsx(Fe,{})}),t.jsxs("section",{className:"dialog-body loadaudio-body",children:[t.jsxs("div",{className:"loadaudio-tab loadaudio-via-file",children:[t.jsx("input",{type:"radio",name:"tabgroup",id:"tab-file",defaultChecked:!0}),t.jsx("label",{className:"ripple",htmlFor:"tab-file",children:n.loadAudio.file}),t.jsx("div",{className:"loadaudio-content",children:t.jsx("label",{className:"audio-input-tip",htmlFor:"audio-input",children:n.loadAudio.loadFile})})]}),t.jsxs("div",{className:"loadaudio-tab loadaudio-via-url",children:[t.jsx("input",{type:"radio",name:"tabgroup",id:"tab-url"}),t.jsx("label",{className:"ripple",htmlFor:"tab-url",children:n.loadAudio.url}),t.jsx("div",{className:"loadaudio-content",children:t.jsxs("form",{className:"audio-input-form",onSubmit:a,children:[t.jsx("input",{type:"url",name:"url",required:!0,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:!1,onFocus:o}),t.jsx("input",{className:"button",type:"submit"})]})})]})]})]}),document.body)},ie=e=>{if(e.includes("music.163.com")){const n=/\d{4,}/.exec(e);if(n!==null)return`https://music.163.com/song/media/outer/url?id=${n[0]}.mp3`}return e},Ze=()=>{const{lang:e}=i.useContext(I),n=()=>{E.open()};return t.jsxs("div",{className:"home",children:[t.jsx("p",{className:"home-tip home-tip-top-left",children:e.home.tipTopLeft}),t.jsx("p",{className:"home-tip home-tip-top-right",children:e.home.tipTopRight}),t.jsx("p",{className:"home-tip home-tip-bottom-left",children:e.home.tipBottomLeft}),t.jsx("p",{className:"home-tip home-tip-bottom-right",children:e.home.tipBottomRight}),t.jsxs("section",{className:"home-tip-section",children:[t.jsx("p",{children:e.home.tips}),t.jsxs("ol",{children:[t.jsx("li",{children:t.jsxs("a",{className:"home-tip-item",href:L(x.editor),children:[t.jsx(Z,{}),t.jsx("span",{className:"home-tip-text",children:e.home.tipForLyricText})]})}),t.jsx("li",{children:t.jsxs("span",{className:"home-tip-item",onClick:n,children:[t.jsx(te,{}),t.jsx("span",{className:"home-tip-text",children:e.home.tipForUploadAudio})]})}),t.jsx("li",{children:t.jsxs("a",{className:"home-tip-item",href:L(x.synchronizer),children:[t.jsx(ee,{}),t.jsx("span",{className:"home-tip-text",children:e.home.tipForSynchronizer})]})})]})]})]})};document.addEventListener("keydown",e=>{const{code:n,key:s,target:r}=e;ae(r)||(s==="?"||n==="Slash"&&e.shiftKey)&&(location.hash=x.home)});const vt=()=>t.jsx("img",{className:"akari-hide-wall",alt:"akari-hide-wall",src:"./svg/akari-hide-wall.svg",crossOrigin:"anonymous"}),et=()=>t.jsx("img",{className:"akari-not-found",alt:"not found",src:"./svg/akari-not-found.svg",crossOrigin:"anonymous"}),tt=()=>t.jsx("img",{className:"akari-odango-loading start-loading",alt:"loading",src:"./svg/akari-odango-loading.svg",crossOrigin:"anonymous"}),nt=i.lazy(async()=>v(()=>import("./editor-BmDhyxv7.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(({Eidtor:e})=>({default:e}))),st=i.lazy(async()=>v(()=>import("./synchronizer-UJyFZc9P.js"),__vite__mapDeps([3,2]),import.meta.url).then(({Synchronizer:e})=>({default:e}))),rt=i.lazy(async()=>v(()=>import("./gist-C41aPWu6.js"),__vite__mapDeps([4,1]),import.meta.url).then(({Gist:e})=>({default:e}))),at=i.lazy(async()=>v(()=>import("./preferences-sAqoGVlM.js"),[],import.meta.url).then(({Preferences:e})=>({default:e}))),ce=()=>{const e=i.useRef(Symbol(ce.name)),{prefState:n,trimOptions:s}=i.useContext(I,_.prefState),[r,a]=i.useState(location.hash);i.useEffect(()=>{function l(){a(location.hash)}return window.addEventListener("hashchange",l),()=>window.removeEventListener("hashchange",l)},[]);const[o,c]=Ye(()=>({text:localStorage.getItem(T.lyric)||Y.emptyString,options:s,select:Number.parseInt(sessionStorage.getItem(C.selectIndex),10)||0}));i.useEffect(()=>k.sub(e.current,l=>{l.type===w.getDuration&&c({type:O.info,payload:{name:"length",value:P(l.payload,n.fixed,!1)}})}),[c,n.fixed]),i.useEffect(()=>{function l(){c({type:O.getState,payload:d=>{localStorage.setItem(T.lyric,Je(d,n)),sessionStorage.setItem(C.selectIndex,d.selectIndex.toString())}}),localStorage.setItem(T.preferences,JSON.stringify(n))}function u(){document.hidden&&l()}return document.addEventListener("visibilitychange",u),window.addEventListener("beforeunload",l),()=>{document.removeEventListener("visibilitychange",u),window.removeEventListener("beforeunload",l)}},[c,n]),i.useEffect(()=>{function l(u){var y;const d=(y=u.dataTransfer)==null?void 0:y.files[0];if(d&&(d.type.startsWith("text/")||/(?:\.lrc|\.txt)$/i.test(d.name))){const m=new FileReader,b=()=>{c({type:O.parse,payload:{text:m.result,options:s}})};m.addEventListener("load",b,{once:!0}),location.hash=x.editor,m.readAsText(d,"utf-8")}}return document.documentElement.addEventListener("drop",l),()=>document.documentElement.removeEventListener("drop",l)},[c,s]),i.useEffect(()=>{const l={[V.auto]:"auto",[V.light]:"light",[V.dark]:"dark"};document.documentElement.dataset.theme=l[n.themeMode]},[n.themeMode]),i.useEffect(()=>{const l=it(n.themeColor);document.documentElement.style.setProperty("--theme-rgb",l.join(", "));const d=ot(...l)+.05,y=d*d>.0525?"var(--black)":"var(--white)";document.documentElement.style.setProperty("--theme-contrast-color",y)},[n.themeColor]);const h=(()=>{switch(r.slice(1)){case x.editor:return t.jsx(nt,{lrcState:o,lrcDispatch:c});case x.synchronizer:return o.lyric.length===0?t.jsx(et,{}):t.jsx(st,{state:o,dispatch:c});case x.gist:return t.jsx(rt,{lrcDispatch:c,langName:n.lang});case x.preferences:return t.jsx(at,{})}return t.jsx(Ze,{})})();return t.jsx("main",{className:"app-main",children:t.jsx(i.Suspense,{fallback:t.jsx(tt,{}),children:h})})},ot=(...e)=>e.map(n=>n/255).map(n=>n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)).reduce((n,s,r)=>n+s*[.2126,.7152,.0722][r],0),it=e=>{e=e.slice(1);const n=Number.parseInt(e,16),s=n>>16&255,r=n>>8&255,a=n>>0&255;return[s,r,a]},le=({min:e,max:n,step:s,value:r,onInput:a,className:o})=>{const c=n-e||1,h=(r-e)/c;return t.jsxs("div",{className:`slider ${o}-slider`,children:[t.jsx("progress",{value:h}),t.jsx("input",{type:"range",className:o,"aria-label":o,min:e,max:n,step:s,value:r,onInput:a})]})},ue=({duration:e,paused:n})=>{const s=i.useRef(Symbol(ue.name)),[r,a]=i.useState(p.currentTime),[o,c]=i.useState(p.playbackRate);i.useEffect(()=>k.sub(s.current,d=>{d.type===w.rateChange&&c(d.payload)}),[]),i.useEffect(()=>{if(n)return U.sub(s.current,d=>{a(d)});{const d=setInterval(()=>{a(p.currentTime)},500/o);return()=>{clearInterval(d)}}},[n,o]);const h=i.useRef(0),l=i.useCallback(d=>{h.current&&cancelAnimationFrame(h.current);const y=d.target.value;h.current=requestAnimationFrame(()=>{const m=Number.parseInt(y,10);a(m),p.currentTime=m})},[]),u=i.useMemo(()=>e?" / "+P(e,0,!1):!1,[e]);return t.jsxs(t.Fragment,{children:[t.jsxs("time",{children:[P(r,0,!1),u]}),t.jsx(le,{min:0,max:e,step:1,value:r,className:"timeline",onInput:l})]})},de=({lang:e})=>{const n=i.useRef(Symbol(de.name)),[s,r]=i.useState(p.playbackRate);i.useEffect(()=>k.sub(n.current,h=>{h.type===w.rateChange&&r(h.payload)}),[]);const a=i.useMemo(()=>Math.log(s),[s]),o=i.useCallback(h=>{const l=Math.exp(Number.parseFloat(h.target.value));r(l),p.playbackRate=l},[]),c=i.useCallback(()=>{p.playbackRate=1},[]);return t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:"ripple glow",title:e.audio.resetRate,onClick:c,children:["X ",s.toFixed(2)]}),t.jsx(le,{className:"playbackrate",min:-1,max:1,step:"any",value:a,onInput:o})]})},he=({lang:e})=>{const n=i.useRef(Symbol(he.name)),[s,r]=i.useState(p.paused),[a,o]=i.useState(p.duration);i.useEffect(()=>k.sub(n.current,d=>{switch(d.type){case w.getDuration:{o(d.payload),r(p.paused);break}case w.pause:{r(d.payload);break}}}),[]);const c=i.useCallback(d=>{p.step(d,-5)},[]),h=i.useCallback(d=>{p.step(d,5)},[]),l=i.useCallback(()=>{p.toggle()},[]),u=i.useCallback(()=>{E.open()},[]);return t.jsxs("section",{className:"lrc-audio"+(s?"":" playing"),children:[t.jsx("button",{className:"ripple glow loadaudio-button",title:e.audio.loadAudio,onClick:u,children:t.jsx(te,{})}),t.jsx("button",{className:"ripple glow",title:e.audio.replay5s,onClick:c,disabled:!a,children:t.jsx(Ae,{})}),t.jsx("button",{className:"ripple glow",title:s?e.audio.play:e.audio.pause,disabled:!a,onClick:l,children:s?t.jsx(He,{}):t.jsx(Pe,{})}),t.jsx("button",{className:"ripple glow",title:e.audio.forward5s,onClick:h,disabled:!a,children:t.jsx(De,{})}),t.jsx(ue,{duration:a,paused:s}),t.jsx(de,{lang:e})]})},ct=["audio/*",".ncm",".qmcflac",".qmc0",".qmc1",".qmc2",".qmc3","qmcogg"].join(", "),lt=()=>{const{prefState:e,lang:n}=i.useContext(I,_.lang|_.builtInAudio),[s,r]=i.useReducer((f,g)=>(URL.revokeObjectURL(f),g),void 0,()=>{let f=sessionStorage.getItem(C.audioSrc);if(f===null&&location.search&&URLSearchParams){const g=new URLSearchParams(location.search),j=g.get("url");if(j!==null)return j;const S=g.get("text")||g.get("title")||"",M=/https?:\/\/\S+/.exec(S);f=M&&ie(M[0])}return f});i.useEffect(()=>{function f(g){const{code:j,key:S,target:M}=g,z=j||S;if(!ae(M)&&p.src)if(g.metaKey||g.ctrlKey)if(["ArrowUp","KeyJ","Up","J","j"].includes(z)){g.preventDefault();const D=p.playbackRate,F=Math.exp(Math.min(Math.log(D)+.2,1));p.playbackRate=F}else if(["ArrowDown","KeyK","Down","K","k"].includes(z)){g.preventDefault();const D=p.playbackRate,F=Math.exp(Math.max(Math.log(D)-.2,-1));p.playbackRate=F}else z==="Enter"&&(g.preventDefault(),p.toggle());else["ArrowLeft","KeyA","KeyH","Left","A","a","H","h"].includes(z)?(g.preventDefault(),p.step(g,-5)):["ArrowRight","KeyD","KeyL","Right","D","d","L","l"].includes(z)?(g.preventDefault(),p.step(g,5)):(j==="KeyR"||S==="R"||S==="r")&&(g.preventDefault(),p.playbackRate=1)}return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[]),i.useEffect(()=>{function f(g){const j=g.dataTransfer.files[0];q(j,r)}return document.documentElement.addEventListener("drop",f),()=>document.documentElement.removeEventListener("drop",f)},[]);const a=i.useCallback(f=>{const g=f.target.files[0];q(g,r)},[]),o=i.useRef(0),c=i.useCallback(()=>{cancelAnimationFrame(o.current),k.pub({type:w.getDuration,payload:p.duration}),R.pub({type:"success",text:n.notify.audioLoaded})},[n]),h=i.useCallback(()=>{U.pub(p.currentTime),o.current=requestAnimationFrame(h)},[]),l=i.useCallback(()=>{o.current=requestAnimationFrame(h),k.pub({type:w.pause,payload:!1})},[h]),u=i.useCallback(()=>{cancelAnimationFrame(o.current),k.pub({type:w.pause,payload:!0})},[]),d=i.useCallback(()=>{cancelAnimationFrame(o.current),k.pub({type:w.pause,payload:!0})},[]),y=i.useCallback(()=>{p.paused&&U.pub(p.currentTime)},[]),m=i.useCallback(()=>{k.pub({type:w.rateChange,payload:p.playbackRate})},[]),b=i.useCallback(f=>{const j=f.target.error,S=n.audio.error[j.code]||j.message||n.audio.error[0];R.pub({type:"warning",text:S})},[n]);return t.jsxs("footer",{className:"app-footer",children:[t.jsx("input",{id:"audio-input",type:"file",accept:ct,hidden:!0,onChange:a}),t.jsx(oe,{setAudioSrc:r,lang:n}),t.jsx("audio",{ref:p,src:s,controls:e.builtInAudio,hidden:!e.builtInAudio,onLoadedMetadata:c,onPlay:l,onPause:u,onEnded:d,onTimeUpdate:y,onRateChange:m,onError:b}),e.builtInAudio||t.jsx(he,{lang:n})]})},q=(e,n)=>{if(sessionStorage.removeItem(C.audioSrc),e){if(e.type.startsWith("audio/")){n(URL.createObjectURL(e));return}if(e.name.endsWith(".ncm")){const s=new Worker(new URL(""+new URL("ncmc-worker-DaA3sXdX.js",import.meta.url).href,import.meta.url));s.addEventListener("message",r=>{if(r.data.type==="success"){const a=r.data.payload,o=new Blob([a],{type:W(a)});n(URL.createObjectURL(o))}r.data.type==="error"&&R.pub({type:"warning",text:r.data.payload})},{once:!0}),s.addEventListener("error",r=>{R.pub({type:"warning",text:r.message}),s.terminate()},{once:!0}),s.postMessage(e);return}if(/\.qmc(?:flac|0|1|2|3)$/.test(e.name)){const s=new Worker(new URL(""+new URL("qmc-worker-CeU_09lu.js",import.meta.url).href,import.meta.url));s.addEventListener("message",r=>{if(r.data.type==="success"){const a=r.data.payload,o=new Blob([a],{type:W(a)});n(URL.createObjectURL(o))}},{once:!0}),s.postMessage(e)}}},N={fLaC:1716281667,OggS:1332176723,RIFF:1380533830,WAVE:1463899717},W=e=>{switch(new DataView(e.buffer).getUint32(0,!1)){case N.fLaC:return"audio/flac";case N.OggS:return"audio/ogg";case N.RIFF:case N.WAVE:return"audio/wav";default:return"audio/mpeg"}};document.addEventListener("visibilitychange",()=>{p.paused||p.toggle()});const ut=()=>{const{lang:e}=i.useContext(I,_.lang);return t.jsxs("header",{className:"app-header",children:[t.jsxs("a",{id:x.home,className:"app-title",title:e.header.home,href:L(x.home),children:[t.jsx("span",{className:"app-title-text",children:e.app.name}),t.jsx("span",{className:"app-title-svg",children:t.jsx(Te,{})})]}),t.jsxs("nav",{className:"app-nav",children:[t.jsx("a",{id:x.editor,className:"app-tab",title:e.header.editor,href:L(x.editor),children:t.jsx(Z,{})}),t.jsx("a",{id:x.synchronizer,className:"app-tab",title:e.header.synchronizer,href:L(x.synchronizer),children:t.jsx(ee,{})}),t.jsx("a",{id:x.gist,className:"app-tab",title:e.header.gist,href:L(x.gist),children:t.jsx(Ve,{})}),t.jsx("a",{id:x.preferences,className:"app-tab",title:e.header.preferences,href:L(x.preferences),children:t.jsx(Oe,{})})]})]})},dt=()=>t.jsx(i.StrictMode,{children:t.jsxs($e,{children:[t.jsx(ut,{}),t.jsx(ce,{}),t.jsx(lt,{}),t.jsx(ne,{})]})});"scrollBehavior"in document.documentElement.style||v(()=>import("./smooth-scroll-Cyy-OSkS.js"),[],import.meta.url);J.render(i.createElement(dt),document.querySelector(".app-container"),()=>{(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&document.addEventListener("click",e=>{const n=e.target.getAttribute("href");(n==null?void 0:n.startsWith("#"))===!0&&(e.preventDefault(),location.replace(n))}),window.addEventListener("dragover",e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"}),window.addEventListener("drop",e=>{e.preventDefault()})});export{O as A,mt as C,ht as D,Z as E,xt as G,T as L,ft as O,i as R,C as S,V as T,yt as U,I as a,x as b,gt as c,pt as d,Y as e,p as f,k as g,w as h,U as i,t as j,P as k,We as l,ae as m,et as n,tt as o,L as p,ee as q,_ as r,Je as s,R as t,_e as u,vt as v};
